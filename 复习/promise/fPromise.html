<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>
    
    <script src="./fPromise.js"></script>
    <script>
        let p1 = new fPromise( ( resolve, reject ) => {
            setTimeout( () => {
                console.log('fPromise')
                resolve('Felix');
                // reject();
            },1000)
        });
        // p1.then( val => {
        //     console.log( 'val' , val );
        // },err => {
        //     console.log( 'err' , err );
        // });
        // p1.then( val => {
        //     console.log( 'val2' , val );
        // },err => {
        //     console.log( 'err2' , err );
        // })
        let p2 = p1.then( val => {
            console.log('test' , val)
            // return 123;
            return new fPromise( (resolve,reject) =>{
                setTimeout(() => {
                    console.log('fPromise2')
                    resolve('Felix2')
                }, 1000);
            } )
        });
        p2.then ( val => {
            console.log('test2' , val)
            return('Felix3')
        }).then( val=>{
            console.log('test3' , val)
        } )
        /* setTimeout(()=>{
            console.log('setTimeout'); // first
        },0)
        new fPromise ( (resolve) => {
            resolve();   
        }).then( () => {
            console.log('then') // second
        }) */ //如果在js里手动修改为异步会产生问题
    </script>
</body>
</html>