<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>
    
    <script src="./kPromise.js"></script>
    <script>
        let p1 = new kPromise( ( resolve, reject ) => {
            setTimeout( () => {
                console.log('kPromise')
                resolve('Felix');
                // reject();
            },1000)
        });
        p1.then( val => {
            console.log( 'val' , val );
        },err => {
            console.log( 'err' , err );
        });
        p1.then( val => {
            console.log( 'val2' , val );
        },err => {
            console.log( 'err2' , err );
        })
        let p2 = p1.then( val => {
            console.log('test')
        });
        p2.then ( val => {
            console.log('test2')
        })
        /* setTimeout(()=>{
            console.log('setTimeout'); // first
        },0)
        new kPromise ( (resolve) => {
            resolve();   
        }).then( () => {
            console.log('then') // second
        }) */ //如果在js里手动修改为异步会产生问题
    </script>
</body>
</html>